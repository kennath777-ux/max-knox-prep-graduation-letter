<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>给Muh-see的毕业信</title>
  <style>
    body {
      font-family: 'STKaiti', 'KaiTi', '楷体', serif;
      background: #f8f9fa;
      color: #333;
      line-height: 1.8;
      padding: 15px;
      max-width: 800px;
      margin: 0 auto;
      /* 默认背景：带曲线的淡绿色 */
      background-image: url('image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23e9f7ef"/><path d="M0,50 Q25,40 50,50 T100,50" stroke="%23c1e1c5" stroke-width="0.5" fill="none"/></svg>');
      background-attachment: fixed;
      transition: background-image 0.8s ease, background-color 0.8s ease; /* 平滑过渡 */
    }
    /* 全家福背景样式 */
    body.family-bg {
      background-image: url('family.jpg') !important;
      background-size: cover !important;
      background-position: center !important;
      background-color: rgba(248, 249, 250, 0.92) !important; /* 半透明白色遮罩 */
      background-blend-mode: overlay !important;
    }
    .container {
      background: white;
      padding: 35px 25px;
      border-radius: 15px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.07);
      position: relative;
      margin-top: 15px;
      transition: box-shadow 0.5s ease; /* 容器阴影随背景变化 */
    }
    body.family-bg .container {
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15); /* 全家福背景时加深阴影 */
    }
    .header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px dashed #c1e1c5;
    }
    .header h1 {
      color: #2e7d32;
      font-size: 1.8em;
      margin-bottom: 8px;
    }
    .brother-note {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 14px 20px;
      margin: 28px 0;
      border-radius: 0 10px 10px 0;
      font-style: italic;
      position: relative;
    }
    .brother-note:before {
      content: "⛵";
      position: absolute;
      left: -12px;
      top: -12px;
      font-size: 1.8em;
      color: #1565c0;
    }
    .signature {
      text-align: right;
      margin-top: 35px;
      font-size: 1.15em;
      color: #1b5e20;
      line-height: 1.5;
    }
    .ps {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px dashed #a5d6a7;
      font-style: italic;
      color: #2e7d32;
      font-size: 1.05em;
    }
    #play-btn {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 14px 30px;
      font-size: 1.15em;
      border-radius: 35px;
      cursor: pointer;
      margin: 20px auto;
      display: block;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(76, 175, 80, 0.35);
      font-family: 'Microsoft YaHei', sans-serif;
      font-weight: bold;
      letter-spacing: 1px;
    }
    #play-btn:hover {
      background: #45a049;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
    }
    .highlight {
      color: #c62828;
      font-weight: bold;
      background: linear-gradient(120deg, #ffecb3 0%, #ffecb3 100%);
      padding: 0 4px;
      border-radius: 3px;
    }
    .ball-icon {
      display: inline-block;
      width: 18px;
      height: 18px;
      background: radial-gradient(circle, #ff9800 60%, #e65100 100%);
      border-radius: 50%;
      margin: 0 3px;
      vertical-align: middle;
    }
    /* 全家福提示 */
    .family-note {
      text-align: center;
      margin-top: 15px;
      font-style: italic;
      color: #5d4037;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.6s ease;
    }
    body.family-bg .family-note {
      opacity: 1;
      transform: translateY(0);
    }
    @media (max-width: 600px) {
      .container {
        padding: 25px 18px;
      }
      #play-btn {
        width: 90%;
        padding: 12px;
      }
      .header h1 {
        font-size: 1.5em;
      }
    }
  </style>
</head>
<body>
  <div style="text-align:center;margin:15px 0">
  <img src="Max.jpg" alt="Max" width="90%" style="border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,0.1)">
  </div>
  <div class="container">
    <button id="play-btn">🎧 Click here to play 点击播放信件（Muh-see专属语音）</button>
    
    <div class="header">
      <h1>给 Muh-see 的毕业信</h1>
      <p>2025年12月 · 小学毕业之际</p>
    </div>
    
    <p>Hey Max：</p>
    
    <p>翻出你小时候的照片，看到那个喜欢手里拽着橘红色大毛巾、成天笑嘻嘻的小家伙，我和妈妈心里暖暖的——那笑容那么亮，仿佛能把整个世界都照亮。转眼间，你就要小学毕业了。时间像风一样，轻轻一吹，就把那个爱笑的小男孩，吹成了一个站在新起点上、眼里有光的少年。</p>
    
    <p>我们想借这个特别的时刻，和你聊聊心里话——只是两个深深爱你的人，想坐在你身边，轻声说几句心里话，告诉你：你很好，一直很好。</p>
    
    <p>你知道吗？每个人刚来到这个世界时，都是两手空空的。没有预设的角色，没有必须完成的任务，也没有“应该成为谁”的剧本。正因如此，你才拥有无限的可能。你不必急于找到“正确答案”，也不必害怕走一条别人没走过的路。大胆去生活，去探索，跟着你心里那个小小的声音——哪怕偶尔迷路，那也是属于你的风景。</p>
    
    <p>当然，路上不会总是阳光灿烂。你会委屈，会难过，甚至会躲在被窝里偷偷哭——这再正常不过了。我们也是这样长大的。情绪不是弱点，而是一扇门，有情绪恰恰说明你在认真地活着。哭过之后，擦干眼泪继续向前，因为你的前方，还有无数个值得期待的明天。</p>
    
    <p>慢慢地，允许一切自然发生——无论事情当时看起来是好是坏，只要带着觉察和勇气去经历，它们最终都会成为你成长的养分。就像那句话说的：“<span class="highlight">凡事发生，皆有利于我</span>”——这不是说世界总对你温柔，而是你有能力把每一次经历，转化为让自己更强大、更通透的契机。</p>
    
    <p>人生就像一场很长很长的马拉松，有人起步快，有人中途发力，有人悄悄蓄力到终点才惊艳全场。所以，别总盯着别人跑得多快。累了，就慢一点；困了，就歇一会儿。真正的胜利，不是比别人快，而是始终在坚持。</p>
    
    <p>在这条路上，你会遇到很多“已知”和“未知”——熟悉的朋友、新奇的知识、突如其来的变化。面对它们，不必急着说“好”或“不好”。世界一直在变，而你，也可以不断刷新自己对它的理解。保持开放的心，就像打开一扇窗，让风吹进来，也让光透进来。时间会帮你把经历变成智慧，把尝试变成底气。</p>
    
    <p>还有一件事，我们希望你永远记得：你自己，就是自己最大的贵人。当你好好吃饭、好好睡觉、认真运动，你的身体会变得强壮；当你的身体有力量，你的精神也会更明亮；当你内心充满光，好运就会悄悄向你靠近——这不是魔法，而是一个温柔又坚定的正循环。</p>
    
    <p>生命从不需要活成别人眼中的形状，它只是呼吸着的、会笑会哭、永远在生长的模样——把自己放在心上吧，不是自私，而是像照顾一株小树：给它阳光，给它水分，也给它自由生长的空间；这样温柔以待的生命，自会成为自己的太阳，哪怕只是微光，也足以照亮脚下的路。</p>
    
    <p>对了，我们还为你准备了一份小小的毕业礼物——一支刻着“MX”的钢笔。它不会替你写字，但会在你写下梦想、疑问、计划，甚至涂鸦的时候，默默陪着你。愿它成为你探索世界的一个小工具，也成为一个温柔的提醒：你的人生，由你自己一笔一画书写。</p>
    
    <p>最后，我们想说：无论你将来选择哪条路——是继续读书、尝试新爱好、交新朋友，还是某天突然想学做蛋糕、养一只猫、环游世界（或者干脆什么都不想做，只想静静发呆）——我们都站在你身后，为你鼓掌。不是因为你“做到了什么”，而是因为你始终是那个真诚、善良、敢于做自己的Max。</p>
    
    <p>毕业不是终点，而是你人生故事的又一个逗号。前方有山有海，有晴有雨，但你已经准备好了。带着你的好奇心、你的笑容、你的那点小倔强，慢慢走，稳稳走，开心地走。</p>
    
    <div class="signature">
      <p>我们永远爱你。</p>
      <p>爸爸 & 妈妈</p>
      <p>2025年12月（小学毕业之际）</p>
    </div>
    
    <div class="ps">
      <p>P.S. Muh-see，爱笑的人运气真的不会差——就像你和Nat发自心底的笑容，都是我们见过最美的光。这支笔，就从写下第一个快乐开始吧。</p>
    </div>
  </div>

   <div class="family-note">
      💖 播放结束的惊喜<br>
      （刷新页面可恢复原始背景）
    </div>
  </div>

  <script>
    // 声明全局变量
    let audio = null;
    let isPlaying = false;
    
    // 页面加载时检查是否需要恢复默认背景
    window.addEventListener('load', function() {
      // 移除可能残留的全家福样式
      document.body.classList.remove('family-bg');
      
      // 重要：如果页面是从缓存加载（比如返回按钮），强制重置背景
      if (performance.navigation.type === 2) {
        document.body.style.backgroundImage = '';
        document.body.style.backgroundColor = '';
      }
    });
    
    document.getElementById('play-btn').addEventListener('click', function(e) {
      e.stopPropagation(); // 阻止事件冒泡
      
      // 首次点击：初始化音频
      if (!audio) {
        audio = new Audio('muhsee.m4a');
        
        // 权限处理
        audio.play().then(() => {
          setupPlayback(this);
        }).catch(e => {
          if (e.name === 'NotAllowedError') {
            showPermissionAlert();
            // 绑定用户手势解锁
            document.body.addEventListener('click', unlockAudio.bind(this), { once: true });
          } else {
            alert('音频加载失败：' + e.message);
          }
        });
        return;
      }
      
      // 后续点击：切换播放/暂停
      togglePlayback(this);
    });
    
    function unlockAudio() {
      if (audio) {
        audio.play().then(() => {
          setupPlayback(this);
        }).catch(e => {
          console.log('Unlock failed:', e);
        });
      }
    }
    
    function setupPlayback(btn) {
      isPlaying = true;
      updateButtonUI(btn, true);
      
      // 播放结束自动重置 + 彩蛋
      audio.onended = () => {
        isPlaying = false;
        updateButtonUI(btn, false);
        
        // 🌟 彩蛋：播放结束显示全家福背景
        setTimeout(() => {
          document.body.classList.add('family-bg');
        }, 300); // 延迟300ms确保按钮状态更新
        
        // 滚动到顶部显示提示
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };
      
      // 错误处理
      audio.onerror = () => {
        alert('音频文件加载失败！\n请确认：\n1. 文件名是 muhsee.m4a\n2. 与本HTML文件在同一文件夹');
      };
    }
    
    function togglePlayback(btn) {
      if (!audio) return;
      
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play().catch(e => {
          if (e.name === 'NotAllowedError') {
            showPermissionAlert();
          }
        });
      }
      
      isPlaying = !isPlaying;
      updateButtonUI(btn, isPlaying);
    }
    
    function updateButtonUI(btn, playing) {
      btn.textContent = playing ? 
        '🔊 播放中... (点击暂停)' : 
        '🎧 重新播放信件';
      btn.style.background = playing ? '#ff9800' : '#4CAF50';
      btn.style.boxShadow = playing ? 
        '0 4px 12px rgba(255, 152, 0, 0.4)' : 
        '0 4px 10px rgba(76, 175, 80, 0.35)';
    }
    
    function showPermissionAlert() {
      if (/Android|iPhone|iPad/i.test(navigator.userAgent)) {
        alert('📱 手机使用指南：\n1. 点击地址栏的"⋮"或"锁"图标\n2. 选择"网站设置"\n3. 将"声音"设为"允许"');
      } else {
        alert('💻 电脑使用指南：\n点击地址栏的"🔊"或"麦克风"图标\n选择"允许"播放声音');
      }
    }
    
    // 防止页面其他点击干扰
    document.body.addEventListener('click', function(e) {
      if (e.target !== document.getElementById('play-btn')) {
        e.stopPropagation();
      }
    }, true);
    
    // 刷新页面时自动恢复默认背景
    window.addEventListener('beforeunload', function() {
      document.body.classList.remove('family-bg');
    });
  </script>
</body>
</html>
